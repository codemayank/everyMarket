<% include ../partials/header %>
<% if (!cart || cart === undefined || cart === null || cart.totalQty === 0){%>
<div class="row">
  <div class="col-sm-12 col-md-4 col-md-offset-4 ">
      <div class="form-group">
        <label for="" class="control-label col-sm-4">Your Cart is Empty!</label>
        <a href="/products" class="btn btn-success row-group-item">Add Products to Cart</a>
      </div>
  </div>
</div>
<% } else { %>
  <div class="container">
    <div class="row">
      <div class="col-sm-12">
        <h3>Your Shopping Cart</h3>
      </div>
    </div>

      <div class="row">
        <div class="col-sm-10">
          <table class="table">

              <tr>
                <th scope="col">Item</th>
                <th scope="col">Price/Unit</th>
                <th scope = "col">Qty</th>
                <th>Actions</th>
                <th scope="col">Total Price</th>
              </tr>


              <% for(let i in cart.items) { %>
              <tr>
                <td><%= cart.items[i].item.name %></td>
                <td><%= (cart.items[i].item.price).toFixed(2) %></td>
                <td>
                  <%= cart.items[i].qty %>
                </td>
                <td>
                  <div class="dropdown">
                        <button class="btn btn-default dropdown-toggle" type="button" id="dropdownMenu1" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true">
                          <span class="caret"></span>
                        </button>
                        <ul class="dropdown-menu" aria-labelledby="dropdownMenu1">
                          <li><a href="/cart/increase-in-cart/<%= cart.items[i].item._id %>">Add One</a></li>
                          <li><a href="/cart/reduce-in-cart/<%= cart.items[i].item._id %>">Remove One</a></li>
                          <li><a href="/cart/remove-from-cart/<%= cart.items[i].item._id %>">Remove Item</a></li>
                        </ul>
                      </div>
                </td>
                <td><%= (cart.items[i].price).toFixed(2) %></td>
              </tr>
              <% } %>
              <tr>
                <td colspan="2">Total Price:<%= (cart.totalPrice).toFixed(2) %></td>
                <td colspan="2">Total Qty: <%= cart.totalQty %></td>
              </tr>

          </table>
          <a href="/cart/checkout" class="btn btn-primary">CheckOut</a>
        </div>
      </div>

  </div>



<% } %>
<% include ../partials/footer %>
